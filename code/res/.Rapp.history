######### R script: mlfpca_acc_data.R ###########
#
# For transforming the FPCA accuracy data from the HPC#
# into the appropriate txt format#
#
# Created: 23 AUG 2022#
# Last changed: 23 AUG 2022#
#
library(lattice)#
#
source("../../functions/fpca_algs.r")#
source("../../functions/construct_txt.r")#
#
file_name <- "../../res/mlfpca_acc.txt"#
construct_txt(file_name = file_name, header = TRUE)
plot_width <- 9#
plot_height <- 2#
#
plot_dim <- c(5, 1)              # c(ncol, nrow)
saved_location <- "../../res"
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = FALSE, log_acc = TRUE, saved_location = saved_location#
)
######### R script: mlfpca_acc_data.R ###########
#
# For transforming the FPCA accuracy data from the HPC#
# into the appropriate txt format#
#
# Created: 23 AUG 2022#
# Last changed: 23 AUG 2022#
#
library(lattice)#
#
source("../../functions/fpca_algs.r")#
source("../../functions/construct_txt.r")#
#
file_name <- "../../res/mlfpca_acc.txt"#
construct_txt(file_name = file_name, header = TRUE)#
#
plot_width <- 9#
plot_height <- 2#
#
plot_dim <- c(5, 1)              # c(ncol, nrow)#
#
saved_location <- "../../res"
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = FALSE, log_acc = TRUE, saved_location = saved_location#
)
######### R script: mlfpca_acc_data.R ###########
#
# For transforming the FPCA accuracy data from the HPC#
# into the appropriate txt format#
#
# Created: 23 AUG 2022#
# Last changed: 23 AUG 2022#
#
library(lattice)#
#
source("../../functions/fpca_algs.r")#
source("../../functions/construct_txt.r")#
#
file_name <- "../../res/mlfpca_acc.txt"#
construct_txt(file_name = file_name, header = TRUE)#
#
plot_width <- 9#
plot_height <- 2#
#
plot_dim <- c(5, 1)              # c(ncol, nrow)#
#
saved_location <- "../../res"
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = FALSE, log_acc = TRUE, saved_location = saved_location#
)
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = TRUE, log_acc = TRUE, saved_location = saved_location#
)
######### R script: mlfpca_acc_data.R ###########
#
# For transforming the FPCA accuracy data from the HPC#
# into the appropriate txt format#
#
# Created: 23 AUG 2022#
# Last changed: 23 AUG 2022#
#
library(lattice)#
#
source("../../functions/fpca_algs.r")#
source("../../functions/construct_txt.r")#
#
file_name <- "../../res/mlfpca_acc.txt"#
construct_txt(file_name = file_name, header = TRUE)#
#
plot_width <- 9#
plot_height <- 4#
#
plot_dim <- c(5, 1)              # c(ncol, nrow)#
#
saved_location <- "../../res"#
#
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = TRUE, log_acc = TRUE, saved_location = saved_location#
)
######### R script: mlfpca_acc_data.R ###########
#
# For transforming the FPCA accuracy data from the HPC#
# into the appropriate txt format#
#
# Created: 23 AUG 2022#
# Last changed: 23 AUG 2022#
#
library(lattice)#
#
source("../../functions/fpca_algs.r")#
source("../../functions/construct_txt.r")#
#
file_name <- "../../res/mlfpca_acc.txt"#
construct_txt(file_name = file_name, header = TRUE)#
#
plot_width <- 9#
plot_height <- 3#
#
plot_dim <- c(5, 1)              # c(ncol, nrow)#
#
saved_location <- "../../res"#
#
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = TRUE, log_acc = TRUE, saved_location = saved_location#
)
######### R script: mlfpca_acc_data.R ###########
#
# For transforming the FPCA accuracy data from the HPC#
# into the appropriate txt format#
#
# Created: 23 AUG 2022#
# Last changed: 23 AUG 2022#
#
library(lattice)#
#
source("../../functions/fpca_algs.r")#
source("../../functions/construct_txt.r")#
#
file_name <- "../../res/mlfpca_acc.txt"#
construct_txt(file_name = file_name, header = TRUE)#
#
plot_width <- 9#
plot_height <- 2.5#
#
plot_dim <- c(5, 1)              # c(ncol, nrow)#
#
saved_location <- "../../res"#
#
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = TRUE, log_acc = TRUE, saved_location = saved_location#
)
######### R script: mlfpca_acc_data.R ###########
#
# For transforming the FPCA accuracy data from the HPC#
# into the appropriate txt format#
#
# Created: 23 AUG 2022#
# Last changed: 23 AUG 2022#
#
library(lattice)#
#
source("../../functions/fpca_algs.r")#
source("../../functions/construct_txt.r")#
#
file_name <- "../../res/mlfpca_acc.txt"#
construct_txt(file_name = file_name, header = TRUE)#
#
plot_width <- 9#
plot_height <- 2.7#
#
plot_dim <- c(5, 1)              # c(ncol, nrow)#
#
saved_location <- "../../res"#
#
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = TRUE, log_acc = TRUE, saved_location = saved_location#
)
######### R script: mlfpca_acc_data.R ###########
#
# For transforming the FPCA accuracy data from the HPC#
# into the appropriate txt format#
#
# Created: 23 AUG 2022#
# Last changed: 23 AUG 2022#
#
library(lattice)#
#
source("../../functions/fpca_algs.r")#
source("../../functions/construct_txt.r")#
#
file_name <- "../../res/mlfpca_acc.txt"#
construct_txt(file_name = file_name, header = TRUE)#
#
plot_width <- 9#
plot_height <- 3#
#
plot_dim <- c(5, 1)              # c(ncol, nrow)#
#
saved_location <- "../../res"#
#
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = TRUE, log_acc = TRUE, saved_location = saved_location#
)
######### R script: mlfpca_acc_data.R ###########
#
# For transforming the FPCA accuracy data from the HPC#
# into the appropriate txt format#
#
# Created: 23 AUG 2022#
# Last changed: 23 AUG 2022#
#
library(lattice)#
#
source("../../functions/fpca_algs.r")#
source("../../functions/construct_txt.r")#
#
file_name <- "../../res/mlfpca_acc.txt"#
construct_txt(file_name = file_name, header = TRUE)#
#
plot_width <- 9#
plot_height <- 2.8#
#
plot_dim <- c(5, 1)              # c(ncol, nrow)#
#
saved_location <- "../../res"#
#
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = TRUE, log_acc = TRUE, saved_location = saved_location#
)
######### R script: mlfpca_acc_data.R ###########
#
# For transforming the FPCA accuracy data from the HPC#
# into the appropriate txt format#
#
# Created: 23 AUG 2022#
# Last changed: 23 AUG 2022#
#
library(lattice)#
#
source("../../functions/fpca_algs.r")#
source("../../functions/construct_txt.r")#
#
file_name <- "../../res/mlfpca_acc.txt"#
construct_txt(file_name = file_name, header = TRUE)#
#
plot_width <- 8#
plot_height <- 2.8#
#
plot_dim <- c(5, 1)              # c(ncol, nrow)#
#
saved_location <- "../../res"#
#
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = TRUE, log_acc = TRUE, saved_location = saved_location#
)
files <- list.files(pattern = ".txt")
files
files[1]
substring(files[1], 4)
substring(files[1], 10)
substring(files[1], 8)
substring(files[1], 11)
substring(files[1], 12)
nchar(files[1])
files <- substring(files, 12)
files
substring(files[1], nchar(files[1]) - 1)
files(1)
files[1]
substring(files[1], 1, nchar(files[1]) - 1)
substring(files[1], 1, nchar(files[1]) - 2)
substring(files[1], 1, nchar(files[1]) - 3)
substring(files[1], 1, nchar(files[1]) - 4)
files <- sapply(files, function(x) substring(x, 1, nchar(x) - 4))
files
files <- list.files(pattern = ".txt")#
files <- substring(files, 12)#
files <- unname(sapply(files, function(x) substring(x, 1, nchar(x) - 4)))
files
files <- as.numeric(unname(sapply(files, function(x) substring(x, 1, nchar(x) - 4))))
files
as.numeric("1")
files <- list.files(pattern = ".txt")#
files <- substring(files, 12)#
files <- unname(sapply(files, function(x) substring(x, 1, nchar(x) - 4)))
typeof(files)
files[1]
files[1] == "1"
as.numeric(files[1])
as.numeric(files)
files <- as.numeric(files)
files
files <- sort(files)
files
1:4 %in% c(1, 2, 4)
1:500 %in% files
!(1:500 %in% files)
which(!(1:500 %in% files))
files <- which(!(1:500 %in% files))
files
library(lattice)
source("../../functions/fpca_algs.r")
source("../../functions/construct_txt.r")
file_name <- "../../res/mlfpca_acc.txt"
construct_txt(file_name = file_name, header = TRUE)
plot_width <- 8
plot_height <- 2.8
plot_dim <- c(2, 1)              # c(ncol, nrow)
saved_location <- "../../res"
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = TRUE, log_acc = TRUE, saved_location = saved_location#
)
score_res <- fpca_score_summary(file_name)
file_name
library(lattice)
source("../../functions/fpca_algs.r")
source("../../functions/construct_txt.r")
file_name <- "../../res/mlfpca_acc.txt"
files <- list.files(pattern = pattern)
pattern <- ".txt"
files <- list.files(pattern = pattern)
files
file_numbers <- as.numeric(regmatches(files, regexpr("[0-9]+", files)))
file_numbers
sort(file_numbers)
files <- files[order(file_numbers)]
files
n_files <- length(files)
n_files
col_names <- names(read.table(files[[1]], header = header))
col_names <- names(read.table(files[[1]], header = TRUE))
col_names
n_col <- length(col_names)
files
n_col
getwd()
file_name <- "../../res/mlfpca_acc.txt"
source("../../functions/construct_txt.r")
file_name <- "../../res/mlfpca_acc.txt"
files <- list.files(pattern = pattern)#
	file_numbers <- as.numeric(regmatches(files, regexpr("[0-9]+", files)))#
	files <- files[order(file_numbers)]#
	n_files <- length(files)#
	col_names <- names(read.table(files[[1]], header = header))#
	n_col <- length(col_names)#
	write(col_names, file_name, ncol = n_col, append = FALSE)
header <- TRUE
files <- list.files(pattern = pattern)#
	file_numbers <- as.numeric(regmatches(files, regexpr("[0-9]+", files)))#
	files <- files[order(file_numbers)]#
	n_files <- length(files)#
	col_names <- names(read.table(files[[1]], header = header))#
	n_col <- length(col_names)#
	write(col_names, file_name, ncol = n_col, append = FALSE)
i <- 1
files
i
files[i]
files[432]
unlist(read.table(files[i], header = header))
unlist(read.table(files[432], header = header))
for(i in 1:n_files) {#
		res <- unname(unlist(read.table(files[i], header = header)))#
		write(res, file_name, ncol = n_col, append = TRUE)#
	}
plot_dim <- c(7, 1)              # c(ncol, nrow)
saved_location <- "../../res"
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = FALSE, log_acc = TRUE, saved_location = saved_location#
)
plot_dim <- c(4, 2)              # c(ncol, nrow)
box_plot_mlfpca_sims(#
	file_name, plot_dim, plot_width, plot_height,#
	save_pdf = FALSE, log_acc = TRUE, saved_location = saved_location#
)
library(lattice)#
#
source("../../functions/fpca_algs.r")#
source("../../functions/construct_txt.r")#
#
file_name <- "../../res/mlfpca_acc.txt"#
construct_txt(file_name = file_name, header = TRUE)
mlfpca_res <- read.table(file_name, header = TRUE)
mlfpca_res
names(mlfpca_res)
split(mlfpca_res, mlfpca_res$"N")
mlfpca_res <- split(mlfpca_res, mlfpca_res$"N")
lapply(mfpca_res, function(X) apply(X[-c(1, 2)], 2, median))
lapply(mlfpca_res, function(X) apply(X[-c(1, 2)], 2, median))
mlfpca_res <- read.table(file_name, header = TRUE)
mlfpca_res
mlfpca_res <- read.table(file_name, header = TRUE)
mlfpca_res[, -c(1, 2)] <- log(mlfpca_res[, -c(1, 2)])
mlfpca_res
mlfpca_res <- split(mlfpca_res, mlfpca_res$"N")
mlfpca_res
lapply(mlfpca_res, function(X) apply(X[-c(1, 2)], 2, median))
Reduce(rbind, lapply(mlfpca_res, function(X) apply(X[-c(1, 2)], 2, median)))
setwd("..")
setwd("..")
getwd()
setwd("res")
getwd()
read.table("tmp_mlfpca.txt", header = TRUE)
vmp_res <- read.table("tmp_mlfpca.txt", header = TRUE)
vmp_res <- split(vmp_res, vmp_res$"N")
vmp_res
lapply(vmp_res, function(X) apply(X[, -c(1, 2)], 2, median))
Reduce(rbind, lapply(vmp_res, function(X) apply(X[, -c(1, 2)], 2, median)))
Reduce(rbind, lapply(mlfpca_res, function(X) apply(X[-c(1, 2)], 2, median)))
Reduce(rbind, lapply(mlfpca_res, function(X) apply(X[-c(1, 2)], 2, median)))[c(T, F)]
Reduce(rbind, lapply(mlfpca_res, function(X) apply(X[-c(1, 2)], 2, median)))[, c(T, F)]
Reduce(rbind, lapply(mlfpca_res, function(X) apply(X[-c(1, 2)], 2, median)))[, c(T, F)][, -c(8, 9)]
Reduce(rbind, lapply(vmp_res, function(X) apply(X[, -c(1, 2)], 2, median)))
